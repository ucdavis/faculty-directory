import React, { Component, useEffect, useState } from 'react';
import { useHistory } from 'react-router-dom';
import { Link, useLocation } from 'react-router-dom';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';

interface State {
  collapsed: boolean;
}

function NavBar() {
  let location = useLocation();
  let history = useHistory();
  let [name, setName] = useState('');

  useEffect(() => {
    const getName = async () => {
      const results = await fetch('api/users/name');
      const response = await results;

      if (response.status === 403) {
        history.push('/error403');
      } else {
        const userData = await results.json();
        setName(userData.name);
      }
    };
    getName();
  }, []);

  return (
    <div className='header'>
      <div className='text-center'>
        {location.pathname != '/' && (
          <p className='mb-2'>
            <Link className='back-link' to='/'>
              <FontAwesomeIcon icon='arrow-left' size='xs' /> Back to Faculty
              List
            </Link>
          </p>
        )}
        <p className='mb-1 discreet ml-auto'>
          <span>{name} | CAES</span> â€¢ Sign out
        </p>
      </div>
    </div>
  );
}

export class NavMenu extends Component<any, State> {
  static displayName = NavMenu.name;

  constructor(props: any) {
    super(props);

    this.toggleNavbar = this.toggleNavbar.bind(this);
    this.state = {
      collapsed: true
    };
  }

  toggleNavbar() {
    this.setState({
      collapsed: !this.state.collapsed
    });
  }

  render() {
    return (
      <header>
        <div className='logo-container text-center'>
          <Link to='/fleece'>
            <svg
              width='67px'
              height='55px'
              viewBox='0 0 67 55'
              version='1.1'
              xmlns='http://www.w3.org/2000/svg'
            >
              <title>Fleece Sheep</title>
              <g
                id='Current'
                stroke='none'
                stroke-width='1'
                fill='none'
                fill-rule='evenodd'
              >
                <g
                  id='pronunciation'
                  transform='translate(-283.000000, -549.000000)'
                >
                  <g
                    id='fleece-sheep-svg'
                    transform='translate(284.570524, 550.788084)'
                  >
                    <path
                      d='M23.9544691,0.841788911 C19.4518431,3.1179391 21.4108614,7.14090173 19.8170389,6.61750297 C15.7132675,5.26985675 11.987144,6.61750297 11.5498055,12.211916 C11.5498055,12.211916 0,12.211916 0,16.126466 C0,18.736166 3.0583614,20.3405797 9.17508421,20.9397071 C7.77904325,23.1239801 8.40876495,25.5487499 11.0642493,28.2140163 C11.1449019,28.3079918 4.77401015,35.6373927 13.6304828,39.9871283 C13.6969537,40.077467 12.7900245,48.2662649 22.1081924,47.5505592 C22.1056262,47.5989479 22.7402573,50.4230193 25.9238846,51.5976037 C27.3388301,52.1196412 29.3489981,51.5289528 31.9543885,49.8255387 C34.5841992,51.5289528 36.6065772,52.1196412 38.0215227,51.5976037 C41.20515,50.4230193 41.8397811,47.5989479 41.8372149,47.5505592 C51.1553828,48.2662649 50.2484536,40.077467 50.3149245,39.9871283 C59.1713971,35.6373927 52.8005054,28.3079918 52.881158,28.2140163 C55.5366423,25.5487499 56.166364,23.1239801 54.7703231,20.9397071 C60.8870459,20.3405797 63.9454073,18.736166 63.9454073,16.126466 C63.9454073,12.211916 52.3956018,12.211916 52.3956018,12.211916 C51.9582633,6.61750297 48.2321398,5.26985675 44.1283684,6.61750297 C42.5345459,7.14090173 44.4935642,3.1179391 39.9909381,0.841788911 C35.4883121,-1.43436128 32.143407,1.62646446 31.9555869,1.62646446 C31.7791781,1.62646446 28.4570952,-1.43436128 23.9544691,0.841788911 Z'
                      id='fur'
                      stroke='#1F1F1F'
                      stroke-width='2'
                      stroke-linejoin='round'
                    ></path>
                    <path
                      d='M27.5264425,14.5251125 C27.4927705,14.532404 27.4519276,14.5311359 27.4226204,14.5492061 C26.0211774,15.4019927 24.5227713,15.5738181 22.9439265,15.2295332 C22.8472752,15.2086098 22.6823446,15.2777204 22.621236,15.3601459 C22.012645,16.1812304 21.2584535,16.8149554 20.3527378,17.2714657 C20.2510981,17.3228231 20.1454053,17.4581911 20.1245162,17.5707336 C19.6827264,19.9674126 19.6914562,22.3523618 20.3181304,24.721777 C20.8833843,26.8581818 21.9038344,28.7866207 22.9342613,30.7112554 C23.6373212,32.0240395 24.2396767,33.3552108 24.2166051,34.9121011 C24.1991455,36.1044172 24.4850461,37.2564717 24.9355657,38.362558 C26.1801842,41.4170557 29.0183013,43.1064608 32.2530001,42.718427 C35.2775605,42.355755 37.1878256,40.6051648 38.1384373,37.7405628 C38.4199731,36.8918975 38.6257467,35.9715854 38.6273056,35.0836095 C38.6301116,33.5444724 39.1339451,32.2056925 39.8288988,30.8957616 C40.7162195,29.2234757 41.6163232,27.5594323 42.2327087,25.7517784 C43.1421658,23.0856315 43.2366346,20.3776378 42.7293714,17.6293825 C42.7025585,17.4848209 42.5712999,17.3126784 42.4422237,17.2435679 C41.5954341,16.7889597 40.8640024,16.1986665 40.2978132,15.4130884 C40.1553305,15.2155843 40.0172128,15.2165354 39.8011505,15.2308013 C39.0276288,15.2815247 38.237271,15.3927991 37.4802735,15.285646 C36.738865,15.180395 36.0308167,14.8364272 35.2847314,14.5897848 C33.4337042,17.3526231 29.4784859,17.3710103 27.5264425,14.5251125 M17.4323114,20.5434398 C17.4008218,19.2874025 17.6359025,17.7825036 17.9230502,16.2845792 C18.0172073,15.7922456 18.2953134,15.4444735 18.7801285,15.2853289 C19.8797703,14.924876 20.66171,14.2179191 21.12283,13.1267327 C21.4037421,12.4622566 22.1161553,12.2631674 22.8285685,12.5985757 C24.0083373,13.1543135 25.1622284,13.1058093 26.2677939,12.4096311 C26.5577477,12.227027 26.8155882,11.9768974 27.0503572,11.7216955 C27.3986135,11.3431724 27.7983131,11.1222087 28.3055763,11.246798 C28.8365346,11.3774107 29.1529894,11.7451551 29.2430933,12.2983568 C29.391188,13.2040859 29.8906567,13.8213258 30.7474232,14.0901596 C31.6235199,14.3650169 32.4438084,14.1992149 33.0495935,13.4789431 C33.3261407,13.1501923 33.5178843,12.7050947 33.6238889,12.2806036 C33.7585771,11.7410338 34.0363715,11.3859702 34.5420757,11.2544065 C35.0543273,11.1212577 35.4742926,11.3143235 35.816625,11.7388146 C36.747283,12.8927712 38.4985412,13.296656 39.8444877,12.6889267 C39.9236793,12.6531033 40.0025592,12.6163289 40.0814391,12.5795544 C40.7891756,12.2489015 41.4747759,12.4730353 41.7787597,13.2034518 C42.2158727,14.2531084 42.9859649,14.8988803 44.0145212,15.2634545 C44.5205372,15.4428884 44.7911607,15.7912945 44.9055833,16.3216707 C45.3451906,18.3642372 45.5453522,20.4207527 45.3610912,22.5115064 C45.1852483,24.5020814 44.6736203,26.4035736 43.8502141,28.2071063 C43.1939209,29.6444796 42.4481475,31.0400062 41.7313694,32.4485307 C41.3226281,33.2515449 41.0498222,34.0678741 41.0329862,34.9995989 C40.9933904,37.1984568 40.406312,39.2492659 39.1857003,41.0854517 C37.6729525,43.3613457 35.567826,44.708051 32.8990046,45.0948167 C30.3287051,45.4676334 27.9389251,44.964204 25.8203922,43.3835372 C24.2446651,42.2077062 23.1899195,40.6336967 22.5236495,38.7788067 C22.0778066,37.5379863 21.8056242,36.252149 21.8146658,34.9371458 C21.8218367,33.8989019 21.4174604,33.0362877 20.9872065,32.1543351 C20.1903014,30.5204087 19.3513062,28.9036015 18.6367106,27.2325836 C17.7674729,25.1995277 17.4139164,23.0402975 17.4323114,20.5434398'
                      id='face'
                      fill='#1F1F1F'
                    ></path>
                    <path
                      d='M32.3037768,38.5142009 C32.8651736,38.2674789 33.4393988,38.0473029 33.983691,37.7659149 C34.4769749,37.5107606 34.9302463,37.5741588 35.1843715,38.010763 C35.4238356,38.4223828 35.3083797,38.9504929 34.8462506,39.1837857 C34.2295694,39.4951552 33.5939509,39.7927831 32.93573,39.9882869 C31.1990042,40.5035924 29.5743745,40.076045 28.0245773,39.2396886 C27.5129671,38.9636098 27.341005,38.4695411 27.573444,38.0351229 C27.818406,37.5772818 28.2884765,37.5076375 28.8388775,37.7830917 C29.3672869,38.0473029 29.9228803,38.2537374 30.5297875,38.5129517 C30.5554444,38.3062049 30.5789632,38.2028315 30.5792686,38.0994581 C30.5817121,37.2175049 30.5902644,36.3349271 30.5691891,35.4535986 C30.5655238,35.29401 30.4729758,35.0928847 30.3556873,34.9879498 C29.4970984,34.2196761 28.6207941,33.4717024 27.7521258,32.715921 C27.380712,32.3923716 27.3242058,31.8898707 27.6125402,31.5254091 C27.9143138,31.1434585 28.4042379,31.1072309 28.8046684,31.4507679 C29.5957552,32.1281604 30.3877584,32.8049283 31.164795,33.4985607 C31.3639412,33.6768877 31.4891712,33.6681431 31.682514,33.4976238 C32.4531365,32.8155467 33.2359765,32.1478357 34.0172893,31.4791878 C34.4574268,31.1025463 34.8948154,31.1265939 35.2304928,31.5347783 C35.541735,31.9129813 35.4885887,32.3714471 35.0658612,32.7415301 C34.1898623,33.5082422 33.3028676,34.2618375 32.4259524,35.0276127 C32.3327935,35.109437 32.215505,35.2356087 32.2136724,35.3430421 C32.1974841,36.359287 32.2042037,37.3758442 32.2042037,38.3924014 C32.2371912,38.4330012 32.2707894,38.4736011 32.3037768,38.5142009'
                      id='nose'
                      fill='#1F1F1F'
                    ></path>
                    <path
                      d='M27.4294756,21.207993 C27.4337454,22.3074332 26.5526868,23.1986395 25.4487924,23.2117791 C24.354897,23.224633 23.439556,22.3308559 23.429557,21.2405563 C23.4195579,20.1368315 24.3328991,19.2099198 25.4285086,19.211916 C26.5209755,19.2136331 27.4254604,20.1159796 27.4294756,21.207993'
                      id='left_eye'
                      fill='#71CC98'
                    ></path>
                    <path
                      d='M36.4294756,21.2313464 C36.4266191,20.1185257 37.332557,19.2076466 38.438351,19.211916 C39.530115,19.2159299 40.4263177,20.119097 40.4294756,21.2184929 C40.4326169,22.3190314 39.5392774,23.2113445 38.4340561,23.211916 C37.3294074,23.212487 36.432632,22.3261722 36.4294756,21.2313464'
                      id='right_eye'
                      fill='#71CC98'
                    ></path>
                    <rect
                      id='closed-left'
                      fill-opacity='0'
                      fill='#71CC98'
                      x='23.4294756'
                      y='20.211916'
                      width='4'
                      height='2'
                    ></rect>
                    <rect
                      id='closed-right'
                      fill-opacity='0'
                      fill='#71CC98'
                      x='36.4294756'
                      y='20.211916'
                      width='4'
                      height='2'
                    ></rect>
                  </g>
                </g>
              </g>
            </svg>
          </Link>
          <h1 className='mt-4'>FLEECE</h1>
          <p className='lede'>
            Faculty List Encompassing Everyone Current and Emeriti
          </p>
        </div>

        <NavBar />
      </header>
    );
  }
}
